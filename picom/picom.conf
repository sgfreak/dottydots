#################################
#    Otimizações (Hardware)     #
#################################
# Backend GLX é OBRIGATÓRIO para o efeito de vidro (Blur)
backend = "glx";

# VSync (Evita cortes na imagem)
vsync = false;

glx-no-stencil = true;
glx-no-rebind-pixmap = true;
use-damage = true; 
fbo = false

#################################
#           Fading              #
#################################
fading = true;
fade-in-step = 0.04;
fade-out-step = 0.04;
fade-delta = 12; 

#################################
#    O Efeito Vidro (Blur)      #
#################################

# AQUI ESTÁ A MÁGICA DO FRUTIGER AERO
# Dual Kawase é o algoritmo mais bonito (parece vidro fosco de verdade)
blur-method = "dual_kawase";

# Strength: Controle isso se lagar!
# 3 a 5 = Vidro bonito e leve. 
# 6 a 12 = Vidro muito fosco (pesado para 256mb VRAM).
blur-strength = 0;

# Configurações para o blur não bugar
blur-background = true;
blur-background-frame = true;
blur-background-fixed = true;

# O que NÃO deve ter efeito de vidro
blur-exclude = [
  "window_type = 'dock'",
  "window_type = 'desktop'",
  "class_g = 'xfce4-screenshooter'",       # Ferramenta de screenshot
  "class_g = 'Polybar'",    # Polybar transparente mas SEM blur (fica mais legível)
  "_GTK_FRAME_EXTENTS@:c"
];

#################################
#   Opacidade (Regras do User)  #
#################################
active-opacity = 0.85;
inactive-opacity = 0.72;
frame-opacity = 1;
inactive-opacity-override = false;

opacity-rule = [
  # Performance máxima em jogos/videos
  "100:fullscreen",
  
  # Seus Apps Específicos
  "100:class_g = 'flashpoint-launcher'",
  "100:class_g = 'retroarch'",
  "100:name *?= 'Flash'",
  "100:class_g *?= 'Flash'",
  "100:class_g = 'MPlayer'",
  "100:class_g = 'Firefox'",
  "100:class_g = 'pt2-clone'",
  "100:class_g = 'mpv'",
  
  # Ferramentas do sistema que precisam de foco
  "100:class_g = 'Dunst'", 
  "100:class_g = 'Gimp'",
  "65:class_g = 'Rofi'",
  
  # A Polybar transparente (45%)
  "65:class_g = 'Polybar'"
];

#################################
#      Geometria (Sharp)        #
#################################
# Você odeia rounded corners, então mantemos SHARP (Afiado)
# Isso dá um visual "Cyberpunk/Industrial Aero"
corner-radius = 0;

#################################
#       Configurações Gerais    #
#################################
log-level = "error";
mark-wmwin-focused = true;
mark-ovredir-focused = true;
detect-rounded-corners = false;
detect-client-opacity = false;
detect-transient = true;
detect-client-leader = true;
unredir-if-possible = true;
xrender-sync-fence = true;
wintypes:
{
  tooltip = { fade = false; shadow = true; opacity = 1; focus = true; };
  dock = { shadow = false; clip-shadow-above = false; }
  dnd = { shadow = false; }
  popup_menu = { opacity = 0.95; }
  dropdown_menu = { opacity = 0.95; }
};

# Animations — Hyprland-like, clean & smooth (cole direto)
animations = (
  {
    triggers = [ "show" ];
    preset = "appear";
    duration = 0.14;
    # optional: scale = 0.985;  # suave "pop" (se suportado)
  },
  {
    triggers = [ "hide" ];
    preset = "disappear";
    duration = 0.12;
  },
);

