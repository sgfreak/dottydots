# Picom — configuração "incrível" apenas com picom base
# foco: transições muito suaves via fading, blur agradável e boa performance

# Backend
backend = "glx"
experimental-backends = true
glx-no-stencil = true
glx-no-rebind-pixmap = true
fbo = true

# Performance / repaint
use-damage = true
detect-client-opacity = true
vsync = true
# refresh-rate = 0

# Sombras
shadow = true
shadow-radius = 10
shadow-opacity = 0.40
shadow-exclude = [
  "class_g = 'Plank'",
  "class_g = 'kitty'",
  "window_type = 'dock'",
  "window_type = 'desktop'"
]

# Fading (suaviza abrir/fechar/minimizar/restore via opacidade)
fading = true
fade-delta = 14            # ajuste para suavidade (valor padrão moderado)
fade-in-step = 0.010       # passos menores = mais frames = mais suave
fade-out-step = 0.010

# Blur (dual_kawase é visualmente agradável; diminua se ficar pesado)
blur-method = "dual_kawase"
blur-strength = 8
# Caso seu picom não suporte dual_kawase, comente estes dois acima e use:
# blur-method = "kernel"
# blur-strength = 5

blur-background-exclude = [
  "class_g = 'Plank'",
  "class_g = 'kitty'",
  "window_type = 'dock'"
]

# Cantos arredondados
corner-radius = 12
rounded-corners-exclude = [
  "class_g = 'Plank'",
  "class_g = 'xfce4-panel'",
  "window_type = 'dock'"
]

# Opacidade geral e regras
inactive-opacity = 0.94
active-opacity = 0.995
frame-opacity = 0.98

opacity-rule = [
  "100:class_g = 'Plank'",
  "88:class_g = 'Kitty'",
  "94:class_g = 'Xfce4-panel'",
  "92:class_g = 'Thunar'"
]

# Heurísticas
detect-rounded-corners = true
mark-wmwin-focused = true
mark-ovredir-focused = true

# Evitar repaint storm em alguns drivers
sw-opti = true

# Logging (útil para debug)
log-level = "info"
log-file = "~/.cache/picom.log"
